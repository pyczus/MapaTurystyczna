<html><body>
  <div id="map" class="map">
	<div id="tooltip"></div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/ol@v8.2.0/dist/ol.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v8.2.0/ol.css">
      <style>
      .map {
        width: 100%;
        height: 100%;
      }
      #map {
        position: relative;
      }

      #info {
        position: absolute;
        display: inline-block;
        height: auto;
        width: auto;
        z-index: 100;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 4px;
        padding: 5px;
        left: 50%;
        transform: translateX(3%);
        visibility: hidden;
        pointer-events: none;
      }
	  </style>
  <script>
  //SQLLite in javascript:
  //https://sqlite.org/wasm/doc/trunk/demo-123.md

  /*
	var map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          })
        ],
        view: new ol.View({
          //center: ol.proj.fromLonLat([19.04686, 49.82245]),
		  center: ol.proj.fromLonLat([6.84913974, 53.44241609]),
          zoom: 17
        })
      });
	*/
	features = [];
	//var polyline = 'w{loHkijtBj@{bHfk@_sCvfB{yE'
	
	function AddPolyline(polyline, type, description)
	{
/*	
		style1 = new ol.style.Style({
    stroke: new ol.style.Stroke({
      width: 6,
      color: [0, 0, 255, 0.8],
	  lineDash: [10, 20],
    })
  })
*/	
		var route = new ol.format.Polyline({factor: 1e5}).readGeometry(polyline, {dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857'})
		var routeFeature = new ol.Feature({
			type: type,
			geometry: route,
			ECO_NAME: description,
			
		});
		//routeFeature.setStyle(style1)

		features.push(routeFeature)
	}
	
  	AddPolyline('}hmoHa}itBb{Dia@~PhRwSfdDuH|gAnVbqDdNfjBhYtcAxxBxcB_QxeAqDd_@xSh{A', '#ff0000', 'opis1')
	AddPolyline('w{loHkijtBj@{bHfk@_sCvfB{yE', '#00ff00', 'opis2')


//var route = new ol.format.Polyline({factor: 1e5}).readGeometry(polyline, {dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857'})
//var route = new ol.geom.LineString(locations)
//    .transform('EPSG:4326', 'EPSG:3857');

//var routeCoords = route.getCoordinates();
//var routeLength = routeCoords.length;
/*
var routeFeature = new ol.Feature({
  type: 'route',
  geometry: route
});
*/
var styles = {
  '#ff0000': new ol.style.Style({
    stroke: new ol.style.Stroke({
      width: 6,
      color: [255, 0, 0, 0.8],
	  lineDash: [10, 20],
    })
  }),
  '#00ff00': new ol.style.Style({
    stroke: new ol.style.Stroke({
      width: 6,
      color: [0, 255, 0, 0.8],
	  lineDash: [10, 20],
    })
  }),
};

var vectorLayer = new ol.layer.Vector({
  source: new ol.source.Vector({
    features: features//[routeFeature]
  }),
  style: function(feature) {
    return styles[feature.get('type')];
  }
});



var map = new ol.Map({
  target: 'map',
  view: new ol.View(),
  layers: [
    new ol.layer.Tile({
      source: new ol.source.OSM()
    }),
    vectorLayer,
  ]
});


const info = document.getElementById('tooltip');
let currentFeature;
const displayFeatureInfo = function (pixel, target) {
  const feature = target.closest('.ol-control')
    ? undefined
    : map.forEachFeatureAtPixel(pixel, function (feature) {
        return feature;
      });
  if (feature) {
    info.style.left = pixel[0] + 'px';
    info.style.top = pixel[1] + 'px';
    if (feature !== currentFeature) {
      info.style.visibility = 'visible';
      info.innerText = feature.get('ECO_NAME');
    }
  } else {
    info.style.visibility = 'hidden';
  }
  currentFeature = feature;
};

map.on('pointermove', function (evt) {
  if (evt.dragging) {
    info.style.visibility = 'hidden';
    currentFeature = undefined;
    return;
  }
  const pixel = map.getEventPixel(evt.originalEvent);
  displayFeatureInfo(pixel, evt.originalEvent.target);
});

map.on('click', function (evt) {
  displayFeatureInfo(evt.pixel, evt.originalEvent.target);
});

map.getTargetElement().addEventListener('pointerleave', function () {
  currentFeature = undefined;
  info.style.visibility = 'hidden';
});




map.getView().fit(
    vectorLayer.getSource().getExtent(), map.getSize(),
    {padding: [130, 5, 5, 5]});
var center = map.getView().getCenter();



  </script>
</body></html>